<div class="modal-header">
	<a class="close" data-dismiss="modal">×</a>
	<h3>Znajomi z Facebook</h3>
</div>

<div class="modal-body">

	<input id="facebook_filter" placeholder="Szukaj znajomych..."/>

	<ul class='unstyled' id="facebook_friends">
		<% @fb_friends.each do |friend| %>
			<% unless @fb_users.include?(friend.identifier) %>
				<li id="row_<%=friend.identifier %>">
					<%= image_tag("http://graph.facebook.com/#{friend.identifier}/picture", :size => "20x20") %>
					<p><%= friend.name %></p>
					<% if @fb_invited.include?(friend.identifier) == true %>
						<div class='alert alert-success pull-right mini'>Zaproszenie wysłane!</div>
					<% else %>
						<%= link_to "Zaproś", new_invitation_path(:uid => friend.identifier), :disable_with => "Ładowanie...",
						:remote => true, :class => "btn btn-mini pull-right", :id => "button_#{friend.identifier}" %>
					<% end %>
				</li>
			<% end %>
		<% end %>
	</ul>
</div>

<div class="modal-footer">
	<a href="#" class="btn" data-dismiss="modal">Zamknij</a>
</div>



<script type="text/javascript">
	$(function(){
		var $list = $('#facebook_friends li');
		// the on keyDown event handler
		$('#facebook_filter').keyup(function(){
			// get the current value of the text field
			var string = $(this).val().toUpperCase();
			// loop over each item in $table
			$list.each(function(){
				// set a string equal to the contents of the cell
				var contents = $("p",this).html().toUpperCase();
				var $row = $(this);
				// check the string against that cell
				var value = (!contents.match('^' + string)) ? $row.attr('class','hidden') : $row.removeAttr('class','hidden');
			});
		});
	});
</script>

